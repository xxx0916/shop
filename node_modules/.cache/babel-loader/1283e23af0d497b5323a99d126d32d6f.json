{"ast":null,"code":"export default {\n  name: 'Register',\n\n  data() {\n    return {\n      // 收集表单数据\n      // 手机号\n      phone: '',\n      // 验证码\n      code: '',\n      // 密码\n      password: '',\n      // 确认密码\n      password1: '',\n      // 是否同意协议\n      agree: true\n    };\n  },\n\n  methods: {\n    // 获取验证码\n    async getCode() {\n      try {\n        // 判断一下--至少用数据\n        // 如果获取到验证码\n        const {\n          phone\n        } = this;\n        phone && (await this.$store.dispatch('getCode', phone)); // 将组件的code属性值变为仓库中的验证码[验证码自动填写了]\n        // console.log(this.$store);\n\n        this.code = this.$store.state.user.code;\n      } catch (error) {\n        alert('获取验证码失败');\n      }\n    },\n\n    // 用户注册\n    async userRegister() {\n      const success = await this.$validator.validateAll(); //全部表单验证\n      // 全部表单验证成功在向服务器发请求，进行注册，只要有一个表单验证不成功都不能注册\n\n      if (success) {\n        try {\n          // 成功---路由跳转\n          const {\n            phone,\n            code,\n            password,\n            password1\n          } = this;\n          await this.$store.dispatch('userRegister', {\n            phone,\n            code,\n            password\n          });\n          this.$router.push('/login');\n        } catch (error) {\n          alert(error.message);\n        }\n      }\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}